<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ReMedi | Wellness Simplified</title>
  <link rel="stylesheet" href="/static/css/style.css">
  <link rel="icon" href="/static/images/titleicon.png">

</head>
<body>
  <!-- Navbar -->
  <header class="navbar">
    <div class="container">
      <h1 class="logo"><a href="/">Re<span>Medi</span></a></h1>
      <nav>
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/about">About Us</a></li>
          {% if 'user' in session %}
          <li><a href="/dashboard">Dashboard</a></li>
          
          <!-- Bell Icon Notification Button -->
          <li>
            <button id="enableNotif" class="notification-bell" title="Enable notifications">
              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"/>
              </svg>
              <span class="pulse-dot"></span>
            </button>
          </li>
          
          <li><a id="logout-btn" class="popupBtn" href="#">Log out</a></li>
          <li>
            <a href="/profile">
              <div class="hello-right">
                <div class="hello-profile" style="background-image: url('{{user.photo_url}}'); background-size: cover; background-position: right;"></div>
              </div>
            </a>
          </li>
          {% else %}
          <li><a href="/getstarted" class="highlight">Get Started</a></li>
          {% endif %}
        </ul>
      </nav>
    </div>
    
  <div id="logout-popup" class="popup">
    <div class="popup-content">
      <p>Log out of your account?</p>
      <button id="confirmLogout">Yes, Log Out</button>
      <button id="closeBtn">Close</button>
    </div>
  </div>
  </header>
  
  {% block content %}
  {% endblock %}
  
  <script src="{{ url_for('static', filename='js/base.js') }}"></script>
  <script src="/firebase-config.js"></script>
  <script type="module" src="{{ url_for('static', filename='js/firebase-messaging.js') }}"></script>
  
  <script>
    // Check if notification is already enabled (stored in localStorage)
    const bellBtn = document.getElementById('enableNotif');
    if (bellBtn) {
      const notifEnabled = localStorage.getItem('notificationEnabled');
      if (notifEnabled === 'true') {
        bellBtn.classList.add('enabled');
        bellBtn.classList.add('hidden'); // Hide if already enabled
        bellBtn.title = 'Notifications enabled';
      }
    }
  </script>
</body>
</html>